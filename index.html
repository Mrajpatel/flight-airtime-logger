<!DOCTYPE html>
<html lang="en">
     <head>
     <meta charset="UTF-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1" />
     <title>Flight & Air Time Tracker</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
     <style>
               .timer-display {
                    font-size: 2rem;
                    font-weight: bold;
               }
               .timestamp {
                    font-size: 0.9rem;
                    color: #555;
               }
     </style>
     </head>
     <body class="bg-light p-3">

          <div class="container text-center">
                    <h1 class="mb-4">Flight & Air Time Tracker</h1>

                    <!-- Flight Time Section -->
                    <div class="card mb-4">
                         <div class="card-body">
                              <h3>Flight Time</h3>
                              <div id="flight-time-display" class="timer-display my-2">00:00:00.000</div>
                              <button id="flight-start" class="btn btn-success me-2">Start</button>
                              <button id="flight-stop" class="btn btn-danger">Stop</button>
                              <div class="mt-2 timestamp" id="flight-log"></div>
                         </div>
                    </div>

                    <!-- Air Time Section -->
                    <div class="card mb-4">
                         <div class="card-body">
                              <h3>Air Time</h3>
                              <div id="air-time-display" class="timer-display my-2">00:00:00.000</div>
                              <button id="air-start" class="btn btn-success me-2">Start</button>
                              <button id="air-stop" class="btn btn-danger">Stop</button>
                              <div class="mt-2 timestamp" id="air-log"></div>
                         </div>
                    </div>
          </div>

          <script>
               function Timer(displayElement, logElement, startButton) {
                    this.startTime = null;
                    this.elapsed = 0;
                    this.timerInterval = null;
                    this.started = false;

                    this.start = () => {
                         if (this.started) return; // prevent multiple starts
                         this.started = true;
                         this.startTime = Date.now();
                         startButton.disabled = true; // Disable Start button

                         this.timerInterval = setInterval(() => {
                              this.elapsed = Date.now() - this.startTime;
                              displayElement.textContent = formatTime(this.elapsed);
                         }, 100);

                         logElement.innerHTML += `<div>Start: ${new Date().toLocaleTimeString()}</div>`;
                    };

                    this.stop = () => {
                         if (!this.started) return;
                         clearInterval(this.timerInterval);
                         logElement.innerHTML += `<div>Stop: ${new Date().toLocaleTimeString()} | Total Time: ${formatTime(this.elapsed)}</div>`;
                    };
               }

               function formatTime(ms) {
                    let totalSeconds = Math.floor(ms / 1000);
                    let hours = Math.floor(totalSeconds / 3600);
                    let minutes = Math.floor((totalSeconds % 3600) / 60);
                    let seconds = totalSeconds % 60;
                    let milliseconds = ms % 1000;

                    return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}.${padMillis(milliseconds)}`;
               }

               function pad(num) {
                    return num.toString().padStart(2, '0');
               }

               function padMillis(num) {
                    return num.toString().padStart(3, '0');
               }

               // Initialize timers
               const flightTimer = new Timer(
                    document.getElementById('flight-time-display'),
                    document.getElementById('flight-log'),
                    document.getElementById('flight-start')
               );

               const airTimer = new Timer(
                    document.getElementById('air-time-display'),
                    document.getElementById('air-log'),
                    document.getElementById('air-start')
               );

               // Flight button events
               document.getElementById('flight-start').addEventListener('click', flightTimer.start);
               document.getElementById('flight-stop').addEventListener('click', flightTimer.stop);

               // Air button events
               document.getElementById('air-start').addEventListener('click', airTimer.start);
               document.getElementById('air-stop').addEventListener('click', airTimer.stop);
          </script>

     </body>
</html>
